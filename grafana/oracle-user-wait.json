{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"slug":"oracle-user-wait","url":"/grafana/d/TQdfPqcik/oracle-user-wait","expires":"0001-01-01T00:00:00Z","created":"2018-08-14T18:05:46+08:00","updated":"2018-09-14T16:25:45+08:00","updatedBy":"admin","createdBy":"admin","version":22,"hasAcl":false,"isFolder":false,"folderId":0,"folderTitle":"General","folderUrl":"","provisioned":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":1,"id":14,"iteration":1536912835525,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":4,"w":24,"x":0,"y":0},"id":6,"legend":{"avg":false,"current":false,"max":false,"min":false,"show":true,"total":false,"values":false},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(oracle_sesstat_dbtime_total{db_name=\"$db_name\", inst=\"$inst\", username=\"$username\"})","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"long session","refId":"A"},{"expr":"sum(oracle_session{db_name=\"$db_name\", username=\"$username\", inst=\"$inst\"})","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"current session","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Long Session Rate","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"gridPos":{"h":8,"w":24,"x":0,"y":4},"id":59,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":false,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(idelta(oracle_sessevent_waits_total{db_name=\"$db_name\", inst=\"$inst\", class!=\"Idle\", username=\"$username\"}[2m])) by (class)","format":"time_series","hide":true,"interval":"1m","intervalFactor":1,"legendFormat":"{{class}}","refId":"A"},{"expr":"sum(idelta(oracle_sessevent_waited_time_total{db_name=\"$db_name\", inst=\"$inst\", class!=\"Idle\", username=\"$username\"}[2m])) by (class) / sum(idelta(oracle_sessevent_waits_total{db_name=\"$db_name\", inst=\"$inst\", class!=\"Idle\", username=\"$username\"}[2m])) by (class)","format":"time_series","interval":"1m","intervalFactor":1,"legendFormat":"avg - {{class}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Class [1m]","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"µs","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":6,"w":24,"x":0,"y":12},"id":4,"legend":{"avg":false,"current":false,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"connected","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":"event","repeatDirection":"h","scopedVars":{"event":{"selected":true,"text":"enq: TX - row lock contention","value":"enq: TX - row lock contention"}},"seriesOverrides":[{"alias":"/avg/","color":"#bf1b00","fill":0,"nullPointMode":"connected","yaxis":2}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"sum(idelta(oracle_sessevent_waits_total{db_name=\"$db_name\", inst=\"$inst\", event=~\"$event\",username=\"$username\"}[2m])) by (event)","format":"time_series","hide":false,"interval":"1m","intervalFactor":1,"legendFormat":"time","refId":"A"},{"expr":"(sum(idelta(oracle_sessevent_waited_time_total{db_name=\"$db_name\", class!=\"Idle\", inst=\"$inst\", username=\"$username\", event=\"$event\"}[2m])) by (event)) / (sum(idelta(oracle_sessevent_waits_total{db_name=\"$db_name\", class!=\"Idle\", inst=\"$inst\", username=\"$username\", event=\"$event\"}[2m])) by (event) > 0)","format":"time_series","hide":false,"interval":"1m","intervalFactor":1,"legendFormat":"avg","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"$class - $event","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"locale","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"µs","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":2,"gridPos":{"h":17,"w":24,"x":0,"y":18},"id":2,"legend":{"alignAsTable":true,"avg":false,"current":false,"max":true,"min":true,"rightSide":true,"show":true,"sort":"max","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"minSpan":24,"nullPointMode":"null as zero","percentage":false,"pointradius":4,"points":false,"renderer":"flot","repeat":null,"repeatDirection":"v","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"expr":"count(oracle_ash_sample{db_name=\"$db_name\", inst=~\"$inst\", event=~\"$event\", username=\"$username\"}) by (event,sql_id)","format":"time_series","instant":false,"interval":"1m","intervalFactor":1,"legendFormat":"{{event}} - {{sql_id}}","refId":"B"}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Ash Events","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"decimals":0,"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":false}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":"1m","schemaVersion":16,"style":"dark","tags":["oracle","event","wait","user"],"templating":{"list":[{"allValue":null,"current":{"text":"","value":""},"datasource":"p","hide":0,"includeAll":false,"label":null,"multi":false,"name":"db_name","options":[],"query":"label_values(oracle_up, db_name)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"tags":[],"text":"1","value":"1"},"datasource":"p","hide":0,"includeAll":false,"label":null,"multi":false,"name":"inst","options":[],"query":"label_values(oracle_up{db_name=\"$db_name\"}, inst)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"tags":[],"text":"PAYMENTUSER","value":"PAYMENTUSER"},"datasource":"p","hide":0,"includeAll":false,"label":null,"multi":false,"name":"username","options":[],"query":"label_values(oracle_sessevent_waited_time_total{db_name=\"$db_name\", inst=\"$inst\"},username)","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"text":"Application","value":["Application"]},"datasource":"p","hide":0,"includeAll":false,"label":"","multi":false,"name":"class","options":[],"query":"label_values(oracle_sessevent_waited_time_total{db_name=\"$db_name\", inst=\"$inst\", username=\"$username\"}, class)","refresh":1,"regex":"","sort":1,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false},{"allValue":null,"current":{"tags":[],"text":"enq: TX - row lock contention","value":["enq: TX - row lock contention"]},"datasource":"p","hide":0,"includeAll":true,"label":"event","multi":true,"name":"event","options":[],"query":"label_values(oracle_sessevent_waited_time_total{db_name=\"$db_name\", inst=\"$inst\", class=~\"$class\" , username=\"$username\"}, event)","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-3h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Oracle User Wait","uid":"TQdfPqcik","version":22}}